<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Dara Form</title>
<script defer src="dara.form.js"></script></head>

<body onload="formObj.load()">
  <div>
    <div class="form-button">
      <button type="button" onclick="formObj.addItem()">Add</button>
      <button type="button" onclick="formObj.getValue()">getValue</button>
      <button type="button" onclick="formObj.getValuePromise()">getValue(true)</button>
      <button type="button" onclick="formBuilder.isValidForm()">valid check</button>
      <button type="button" onclick="formBuilder.resetForm()">Reset</button>
      <button type="button" onclick="formObj.setFieldItems()">setFieldItems</button>
    </div>
  </div>

  <div style="padding: 0px 20px">
    <form id="formArea"></form>
  </div>
</body>

</html>
<style>
  .form-button {
    text-align: center;
  }
</style>
<script>
  var formInfo = {
    message: "This value is not valid",
    //mode: 'vertical',
    //autoFocus: false,
    style: {
      //width: '600px',
      position: 'left-left',
      labelWidth: '3'

    },
    message: {
      empty: "{name} 필수 입력사항입니다.",
      string: {
        minLength: "{size} 글자 이상 입력해야합니다.",
        maxLength: "{size} 글자 이상 입력할 수 없습니다.",
      },
      number: {
        minimum: "{size} 보다 커야 합니다",
        miximum: "{size} 보다 커야 합니다",
      },
      regexp: {
        email: "이메일이 유효하지 않습니다.",
        url: "URL이 유효하지 않습니다.",
      },
    },
    fields: [
      {
        name: "hiddenMode",
        renderType: "hidden",
        defaultValue: "asdf",
      },
      {
        name: "uid",
        label: "아이디",
        tooltip: "아이디를 넣어주세요.",
        description: "설명설명설명",
        placeholder: "아이디를 넣어주세요.",
        renderType: "tab",
        style: {
          labelHide: false,
          position: 'top-left'
        },
        children: [
          {
            label: 'tab1'
            , description: 'tabl 설명'
            , children: [
              {
                name: "uname222",
                label: "tab-이름",
                style: {
                  customClass: 'custom-class',
                  position: 'left',
                  labelWidth: '120px',
                  labelHide: false,
                }
                , rule: {
                  minLength: 2,
                  maxLength: 100,
                },
                onChange: (arg) => {
                  console.log(arg);
                },
              }
              , {
                name: "uname222333",
                label: "tab11-이름",
                rule: {
                  minLength: 2,
                  maxLength: 100,
                },
                onChange: (arg) => {
                  console.log(arg);
                },
              }

              , {
                label: "child tab",
                renderType: "tab",
                style: {
                  //labelHide: true
                  position: 'top-center'
                }
                , children: [
                  {
                    label: 'child-tab1'
                    , description: 'tabl 설명'
                    , children: [
                      {
                        name: "child-uname222",
                        label: "tab-이름",
                        style: {
                          customClass: 'custom-class',
                          position: 'left',
                          labelWidth: '120px',
                          labelHide: false,
                        }
                      }
                    ]
                  }
                  , {
                    label: 'child-uname2-tab2'
                    , children: [
                      {
                        name: "child-uname333",
                        label: "tab",

                        rule: {
                          minLength: 2,
                          maxLength: 100,
                        },
                        onChange: (arg) => {
                          console.log(arg);
                        },
                      }
                    ]
                  }
                ]
              }
            ]
          }
          , {
            label: 'tab2'
            , children: [
              {
                name: "uname333",
                label: "tab-22222222222222222222222222222222",

                rule: {
                  minLength: 2,
                  maxLength: 100,
                },
                onChange: (arg) => {
                  console.log(arg);
                },
              }
            ]
          }
        ]
      },
      {
        name: "uname",
        label: "이름",
        required: true,
        rule: {
          minLength: 2,
          maxLength: 100,
        },
        onChange: (arg) => {
          console.log(arg);
        },
      },
      {
        label: '비밀번호'
        , orientation: 'vertical'
        , conditional: {
          show: true,
          custom: function () {

            return true;
          }
        }
        , children: [{
          name: 'upw'
          , label: '비밀번호'
          , style: {
            labelHide: true
          }
          , renderType: 'password'
          , regexpType: 'number-char'
          , rule: {
            minLength: 3
          }
          , different: {
            field: 'uid',
            message: '아이디와 달라야 합니다.'
          }
        }
          , {
          name: 'confirmUpw'
          , label: '확인 비밀번호'
          , style: {
            labelHide: true
          }
          , renderType: 'password'
          , identical: {
            field: 'upw',
            message: '비밀번호가 같아야합니다.'
          }
        }]
      }
      , {
        name: "age",
        label: "나이",
        required: true,
        renderType: "number",
        defaultValue: 5,
      },
      {
        name: "sex",
        label: "성별",
        required: true,
        renderType: "dropdown",
        listItem: {
          list: [
            { label: "남", value: "Y", selected: true },
            { label: "여", value: "X" },
          ],
        },
      },
      {
        name: "cmpCredId",
        label: "credentials",
        renderType: "dropdown",
        required: true,
        listItem: {
          labelField: "credName",
          valueField: "credId",
          list: [{ label: "선택하세요." }, { credId: "credId", credName: "credName" }],
        },
        description: "awefawfeawefawef",
      },
      {
        label: "checkbox",

        name: "checkbox11",
        required: true,
        renderType: "checkbox",
        listItem: {
          orientation: "horizontal", // 'vertical , horizontal'
          list: [
            { label: "checkbox value", value: "Y", selected: true }
            , { label: "checkbox value111", value: "Y1" }
            , { label: "checkbox value222", value: "Y2" }
            , { label: "checkbox value333", value: "Y3" }
          ],
        },
        onChange: (arg) => {
          console.log(arg);
        },
      }
      , {
        label: "라벨주소",
        name: 'newAddress',
        renderType: 'checkbox',
        listItem: {
          orientation: "horizontal", // 'vertical , horizontal'
          list: [
            { label: "추가주소", value: "Y", selected: true }
          ],
        }
        , description: `<div><a href="asdf">111111111111111</a></div>`
        , orientation: "horizontal" // 'vertical , horizontal'
        , conditional: {
          show: true,
          custom: function () {
            return true;
          },
        },
        children: [
          {
            name: "address32",
            label: "주소",
            orientation: 'vertical',
            style: {
              labelHide: false,
              position: 'left',
              labelWidth: '120px',
            },
            required: true,
            rule: {
              minLength: 2,
              maxLength: 100,
            },
            conditional: {
              show: false,
              field: "newAddress",
              eq: "N",
              //custom?: OptionCallback
            }
          },
          {
            name: "address",
            label: "주소2",
            hideLabel: true,
            required: true,
            style: {
              labelHide: false,
            },
            rule: {
              minLength: 2,
              maxLength: 100,
            },
            conditional: {
              show: true,
              custom: function () {
                return true;
              },
            },
          },
          {
            name: "address2",
            label: "주소3",
            style: {
              //width: '200px',
              labelHide: false,
              position: 'left'
            },
            required: true,
            rule: {
              minLength: 2,
              maxLength: 100,
            },
            conditional: {
              show: true,
              field: "newAddress",
              eq: "Y",
              //custom?: OptionCallback
            },
          },
          {
            renderType: "text",
            label: "주소 하위1",
            //childLabelWidth: "",
            orientation: "horizontal", // 'vertical , horizontal, horizontal-row'
            style: {
              labelWidth: "200px",
              labelHide: false
            },
            conditional: {
              show: true,
              custom: function () {
                return true;
              },
            },
            children: [
              {
                name: "address22222",
                label: "주소1",
                labelWidth: "150px",
                renderType: "text",
              },
              {
                name: "address222333322",
                label: "주소2",
                renderType: "text",
              },
            ],
          },
          {
            label: "버튼",
            hideLabel: true,
            renderType: "button",
            onClick: (arg) => {
              console.log(arg);
            },
          },
        ],
      },
    ],
  };

  var rowIdx = 0;
  var formBuilder;
  var formObj = {
    load: () => {
      formBuilder = new DaraForm("#formArea", formInfo);
    },
    addItem: () => {
      rowIdx += 1;
      formBuilder.addField({
        name: `addItem${rowIdx}`,
        label: `추가컬럼${rowIdx}`,
        maxLength: 100,
        required: true,
      });
    },
    getValue: () => {
      alert(JSON.stringify(formBuilder.getValue()));
    },
    getValuePromise: () => {
      formBuilder
        .getFormDataValue(true)
        .then((aa) => {
          console.log(aa);

          for (let [name, value] of aa.entries()) {
            console.log(`${name} :  ${value}`);
          }

          alert("form data console 확인");
        })
        .catch((e) => {
          alert(e.message);
        });
    },
    setFieldItems: () => {
      formBuilder.setFieldItems("picture", [
        { fileId: "test1", fileName: "aaa.zip" },
        { fileId: "test2", fileName: "bbb.zip" },
      ]);
      formBuilder.setValue({ sex: "X" });
    },
  };
</script>